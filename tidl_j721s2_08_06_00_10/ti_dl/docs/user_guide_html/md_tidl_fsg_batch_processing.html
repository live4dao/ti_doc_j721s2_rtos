<!-- HTML header for doxygen 1.8.11-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<title>TI Deep Learning Product User Guide: TIDL-RT: Batch Processing</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="ti_logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">TI Deep Learning Product User Guide
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('md_tidl_fsg_batch_processing.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">TIDL-RT: Batch Processing </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#did_tidl_batch_processing_intro">Introduction</a></li>
<li class="level1"><a href="#did_tidl_batch_processing_import">List of Import Configuration Parameters - Batch Processing</a></li>
<li class="level1"><a href="#did_tidl_batch_processing_infer">List of Infer Configuration Parameters - Batch Processing</a></li>
<li class="level1"><a href="#did_tidl_batch_processing_tf">IO Tensor formats - Batch Processing</a></li>
<li class="level1"><a href="#did_tidl_batch_processing_perf">Performance improvement with Batch processing</a></li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="did_tidl_batch_processing_intro"></a>
Introduction</h1>
<ul>
<li>Batch processing feature can improve the performance of DNN on small resolution input by stitching and processing the small resolution inputs together. This page shall explain usage of this feature in TIDL-RT import and inference</li>
</ul>
<h1><a class="anchor" id="did_tidl_batch_processing_import"></a>
List of Import Configuration Parameters - Batch Processing</h1>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Parameter  </th><th class="markdownTableHeadNone">Default  </th><th class="markdownTableHeadNone">Description   </th></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">numBatches  </td><td class="markdownTableBodyNone">1  </td><td class="markdownTableBodyNone">Number of batches to processed together, it can take values &gt;= 1   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone">inData  </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">File containing input tensors to process, Refer below IO Tensor formats section   </td></tr>
</table>
<h1><a class="anchor" id="did_tidl_batch_processing_infer"></a>
List of Infer Configuration Parameters - Batch Processing</h1>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Parameter  </th><th class="markdownTableHeadNone">Default  </th><th class="markdownTableHeadNone">Description   </th></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">inData  </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">File containing input tensors to process, Refer below IO Tensor formats section   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone">outData  </td><td class="markdownTableBodyNone"></td><td class="markdownTableBodyNone">File containing output tensors to consume, Refer below IO Tensor formats section   </td></tr>
</table>
<h1><a class="anchor" id="did_tidl_batch_processing_tf"></a>
IO Tensor formats - Batch Processing</h1>
<ul>
<li>To enable batch processing feature set "numBatches to &gt;1" in the import config file. For 224x224 resolution network, if user sets numBatches = 4, it means 4 images will be processed together so user need to concat 4 input images together and provide the concatenated input in the "inData" parameter of the import and infer config files</li>
<li>The below image describes properties of concatenated image with 4 batches (Both input and output).</li>
</ul>
<div class="image">
<img src="IO_Tensor_Batches_4.png" alt="IO_Tensor_Batches_4.png"/>
<div class="caption">
TIDL Input Output Tensor - 4 Batches</div></div>
<ul>
<li>The output also is in the same format as the input, so output for each image needs to be extracted from this concatenated output image indicated by "outData" parameter in the infer config file</li>
</ul>
<h1><a class="anchor" id="did_tidl_batch_processing_perf"></a>
Performance improvement with Batch processing</h1>
<ul>
<li>By enabling batch processing, users can see performance improvement of 30% to 50% in many neural networks (with small input resolution size of 224x224) </li>
</ul>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.11-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
